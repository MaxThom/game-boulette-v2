@page "/game/{gamecode}"
@inherits AppBaseComponent
@inject IJSRuntime js
@inject NavigationManager NavigationManager

<MudContainer MaxWidth="MaxWidth.Large" Class="mt-16">
    <MudText Typo="Typo.h4" Align="Align.Center" GutterBottom="true"><strong>BaseYo vs Drum</strong></MudText>
    <MudText Align="Align.Center">@LanguageManager.CurrentLanguage.GamePage.RoundLabel #1</MudText>

    
    <MudGrid Class="mt-4" Justify="Justify.Center">        
        <MudItem xs="12" sm="3" md="3" Class="mx-auto">
            <MudItem Class="d-flex flex-column align-start px-1">
                <MudItem Class="d-flex flex-row justify-center">
                    <MudAvatar Class="my-auto mr-3" Color="Color.Inherit" Variant="Variant.Outlined">3</MudAvatar>
                    <MudText Class="my-auto" style="font-size: 1.5em;" Typo="Typo.overline">@LanguageManager.CurrentLanguage.GamePage.ScoreLabel</MudText>
                </MudItem>
                <MudButton Class="pa-2 mx-2 my-2" Variant="Variant.Outlined" Color="Color.Tertiary" >MaxThom</MudButton>
                <MudButton Class="pa-2 mx-2 my-2" Variant="Variant.Outlined" Color="Color.Primary">qwdqwd</MudButton>
                <MudButton Class="pa-2 mx-2 my-2" Variant="Variant.Filled" Color="Color.Secondary">31321dsdasdasdas</MudButton>
                <MudButton Class="pa-2 mx-2 my-2" Variant="Variant.Outlined" Color="Color.Warning">asdasdasd</MudButton>
            </MudItem>
        </MudItem>
         <MudItem xs="12" sm="6" md="6" Class="ma-auto">
             <MudPaper Elevation="25" Class="rounded-lg d-flex flex-column justify-space-around align-center" Style="height:300px;">                
                <MudText Class="mt-5" style="font-size: 1.5em;" Typo="Typo.overline">0:59</MudText>
                <MudButton Class="px-5 mt-n5" Style="min-width:75%" Variant="Variant.Filled" Size="Size.Large" Color="Color.Info">Bateau</MudButton>
                <MudItem Class="d-flex flex-row justify-center">
                    <MudButton Class="mx-12" Variant="Variant.Text" Color="Color.Warning">@LanguageManager.CurrentLanguage.GamePage.SkipWord</MudButton>
                    <MudButton Class="mx-12" Variant="Variant.Text" Color="Color.Success">@LanguageManager.CurrentLanguage.GamePage.FoundWord</MudButton>
                </MudItem>
            </MudPaper>
            <MudItem Class="d-flex flex-row justify-center">
                <MudText Class="my-auto" style="font-size: 1.5em;" Typo="Typo.overline">32 @LanguageManager.CurrentLanguage.GamePage.RemaningWords</MudText>
            </MudItem>
        </MudItem>
         <MudItem xs="12" sm="3" md="3" Class="mx-auto">
            <MudItem Class="d-flex flex-column align-end flex-wrap py-2 px-1">
                <MudItem Class="d-flex flex-row justify-center">
                    <MudAvatar Class="my-auto mr-3" Color="Color.Inherit" Variant="Variant.Outlined">4</MudAvatar>
                    <MudText Class="my-auto" style="font-size: 1.5em;" Typo="Typo.overline">@LanguageManager.CurrentLanguage.GamePage.ScoreLabel</MudText>
                </MudItem>
                <MudButton Class="pa-2 mx-2 my-2" Variant="Variant.Outlined" Color="Color.Tertiary">MaxThom</MudButton>
                <MudButton Class="pa-2 mx-2 my-2" Variant="Variant.Outlined" Color="Color.Primary">qwdqwd</MudButton>
                <MudButton Class="pa-2 mx-2 my-2" Variant="Variant.Outlined" Color="Color.Secondary">31321dsdasdasdas</MudButton>
                <MudButton Class="pa-2 mx-2 my-2" Variant="Variant.Outlined" Color="Color.Warning">asdasdasd</MudButton>
            </MudItem>
        </MudItem>
    </MudGrid>    
    <MudGrid Class="" Justify="Justify.Center">
        <MudItem xs="12" sm="12" md="12">
            <MudExpansionPanels>
                <MudExpansionPanel Text="" MaxHeight="150">
                    <TitleContent>
                        <MudItem class="d-flex">
                            <MudIcon Icon="@Icons.Material.Filled.Settings" class="mr-3"></MudIcon>
                            <MudText>@LanguageManager.CurrentLanguage.GameLobbyPage.ConfigurationLabel</MudText>
                        </MudItem>
                    </TitleContent>
                    <ChildContent>
                        <MudForm @ref="form" @bind-IsValid="@success" @bind-Errors="@errors" Class="d-flex flex-row justify-center flex-wrap py-1 px-1">
                            <MudTextField Class="pa-1 ma-1" T="string" ReadOnly="@(!IsHost)" Margin="Margin.Dense" @bind-Value="game.GameName" Label="@LanguageManager.CurrentLanguage.CreateGamePage.GameName" Variant="Variant.Outlined" Required="true" RequiredError="@LanguageManager.CurrentLanguage.CreateGamePage.MissingField" />
                            <MudTextField Class="pa-1 ma-1" T="string" ReadOnly="@(!IsHost)" Margin="Margin.Dense" @bind-Value="game.GameTheme" Label="@LanguageManager.CurrentLanguage.CreateGamePage.GameTheme" Variant="Variant.Outlined" />            
                            <MudNumericField Class="pa-1 ma-1" ReadOnly="@(!IsHost)" Margin="Margin.Dense" @bind-Value="game.NumberOfRound" Label="@LanguageManager.CurrentLanguage.CreateGamePage.NumberOfRound" Variant="Variant.Outlined" Adornment="Adornment.End" AdornmentText="@LanguageManager.CurrentLanguage.CreateGamePage.Rounds" Required="true" RequiredError="@LanguageManager.CurrentLanguage.CreateGamePage.MissingField"/> 
                            <MudNumericField Class="pa-1 ma-1" ReadOnly="@(!IsHost)" Margin="Margin.Dense" @bind-Value="game.TimePerTurn" Label="@LanguageManager.CurrentLanguage.CreateGamePage.TimePerTurn" Variant="Variant.Outlined" Adornment="Adornment.End" AdornmentText="@LanguageManager.CurrentLanguage.CreateGamePage.Seconds" Required="true" RequiredError="@LanguageManager.CurrentLanguage.CreateGamePage.MissingField"/>                        
                            <MudNumericField Class="pa-1 ma-1" ReadOnly="@(!IsHost)" Margin="Margin.Dense" @bind-Value="game.NumberOfPaper" Label="@LanguageManager.CurrentLanguage.CreateGamePage.NumberOfPaper" Variant="Variant.Outlined" Adornment="Adornment.End" AdornmentText="@LanguageManager.CurrentLanguage.CreateGamePage.Papers" Required="true" RequiredError="@LanguageManager.CurrentLanguage.CreateGamePage.MissingField"/>                        
                            <MudTextField T="string" Class="pa-1 ma-1" ReadOnly="@(!IsHost)" Margin="Margin.Dense" @bind-Value="game.VideoUrl" Label="@LanguageManager.CurrentLanguage.CreateGamePage.VideoURL" Variant="Variant.Outlined" Adornment="Adornment.End" AdornmentIcon="@Icons.Material.Filled.ContentCopy" OnAdornmentClick="OnCopyVideoUrl"/>                        
                            <MudField Class="pa-1 ma-1" Label="@LanguageManager.CurrentLanguage.GameLobbyPage.GameUrl" Margin="Margin.Dense" Variant="Variant.Outlined" Adornment="Adornment.End" AdornmentIcon="@Icons.Material.Filled.ContentCopy" OnAdornmentClick="OnCopyGameUrl">localhost:5001/lobby/24f8bds34d=</MudField>
                        </MudForm>
                    </ChildContent>                    
                </MudExpansionPanel>
            </MudExpansionPanels>
            <MudExpansionPanel>
                <TitleContent>
                    <MudItem class="d-flex">
                        <MudIcon Icon="@Icons.Material.Filled.Accessibility" class="mr-3"></MudIcon>
                        <MudText>@LanguageManager.CurrentLanguage.GameLobbyPage.RulesLabel</MudText>
                    </MudItem>
                </TitleContent>
                <ChildContent>
                    <MudText Typo="Typo.body1">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. </MudText>
                </ChildContent>                    
            </MudExpansionPanel>
        </MudItem>
    </MudGrid>
    <MudGrid Class="" Justify="Justify.Center">
        <MudItem xs="12" sm="12" md="12">
            <MudButton Variant="Variant.Outlined" Color="Color.Tertiary" OnClick="NavigateToIndexComponent" Class="pa-2 ml-2 mr-auto">@LanguageManager.CurrentLanguage.GameLobbyPage.Leave</MudButton>
        </MudItem>
    </MudGrid>
</MudContainer>

@code {
    [Parameter]
    public string GameCode { get; set; }
    public bool IsHost { get; set; } = true;
    public string TeamNameOne { get; set; } = "Équipe #1";
    public string TeamNameTwo { get; set; } = "Équipe #2";
    bool success;
    string[] errors = { };
    MudForm form;

    GameConfig game = new GameConfig()
    {
        GameName = "Partie de Bob",
        GameTheme = "Tout",
        NumberOfRound = 3,
        TimePerTurn = 60,
        NumberOfPaper = 5,      
        VideoUrl = "zoom.com/312dsd2g="
    };

    protected override void OnParametersSet()
    {
        GameCode = GameCode ?? "";
    }

    void OnTeamOneEdit()
    {
    }

    void OnTeamTwoEdit()
    {
    }

    void OnCopyGameUrl() 
    {
        Console.WriteLine("Copy");
    }

    void OnCopyVideoUrl() 
    {
        Console.WriteLine("Copy");
    }

    private void NavigateToIndexComponent()
    {
        NavigationManager.NavigateTo("/");
    }

    private void NavigateToGameComponent()
    {
        NavigationManager.NavigateTo($"/game/{GameCode}");
    }
}
